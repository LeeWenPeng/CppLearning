## 1  结构体的定义与使用

作用：创建自定义变量类型

语法：

```c++
struct 结构体名{
    变量类型 变量名;
    变量类型 变量名1；
};
```

或者，可以在定义结构体时，声明一个结构体变量

```c++
struct 结构体名{
    变量类型 变量名;
    变量类型 变量名1；
}结构体变量名;
```

结构体构建的三种方法：

1. 先创建，再使用 `.`，调用属性赋值
2. 创建时初始化
3. 定义时创建，再使用 `.`，调用属性赋值

代码：

```c++
#include <iostream>
using namespace std;

struct student {
	//姓名
	string name;
	//年龄
	int age;
	//分数
	int score;
} student3;//第三种创建方法 

int main() {
	
	//结构体 - 结构体的创建
	// 示例：学生结构体，学生包括（姓名，年龄，分数）
	//三种方法：
	//1.声明，然后再赋初值
	struct student student1;
    //student student1 //这种也是可以的，在c++中，结构体声明变量时，可以忽略关键字struct
	student1.name = "李四";
	student1.age = 18;
	student1.score = 100;
	cout << "姓名：" << student1.name <<" ";
	cout << "年龄：" << student1.age << " ";
	cout << "分数：" << student1.score << endl;

	//2.创建时初始化
	struct student student2 = { "王五", 28, 80 };
	cout << "姓名：" << student2.name << " ";
	cout << "年龄：" << student2.age << " ";
	cout << "分数：" << student2.score << endl;

	//3.定义时顺便创建，然后再赋值
	student3.name = "张三";
	student3.age = 39;
	student3.score = 99;
	cout << "姓名：" << student3.name << " ";
	cout << "年龄：" << student3.age << " ";
	cout << "分数：" << student3.score << endl;

	system("pause");
	return 0;
}
```

> [!note] 注意：
> - 结构体在声明变量时，可以忽略关键字 struct
> - 结构体在定义时，不要忘了 `;`

> struct 在 C 和 C++ 之间的区别：
>
> 1. C 结构体中不允许有函数存在，C++ 结构体中允许有成员函数
> 
> 2. C 结构体的默认控制权限位 public 且不允许更改，而 C++ 的控制权限可以有 public、protected、private 三种 (默认也是 public)
> 
> > 注意：这点也是和 C++ 中类的区别，C++ 中类的默认控制权限为 private
>
> 3. C 结构体不能继承，而 C++ 的结构体是可以从其他结构体和类继承的
> 
> 4. C 结构体在使用时必须带上关键字 struct 或者 使用 typedef 关键字取别名，而 C++ 结构体可以直接省略 struct 关键字进行使用

结构体 struct 在 C 语言和 C++ 中的区别

|      | C            | C++                      |
| ---- | ------------ | ------------------------ |
| 静态成员 | 不允许          | 允许                       |
| 成员函数 | 不允许          | 允许                       |
| 控制权限 | public       | public、protected、private |
| 继承关系 | 不允许          | 可以从其他结构体继承               |
| 初始化  | 不可以直接初始化数据成员 | 可以                       |
| 使用   | struct 类型名   | 直接使用类型名                  |

```C++
// C
// 1） 定义结构体
struct stu_name{
	…
};

struct stu_name variable; // 定义变量 需要加上关键字 struct

// 2） 定义结构体并起别名
typedef struct {
	…
}typ_stu_name;
typ_stu_name variable2; // 定义变量

```

## 2  结构体数组

使用下标访问数组中的结构体变量

使用 `.` 访问结构体变量中的属性

## 3  结构体指针

结构体指针使用 `->` 访问结构体的属性

语法：

```c++
struct 结构体名 * p = &结构体变量;

p -> 结构体变量.结构体属性;
```

## 4  嵌套结构体

结构体成员列表中可以有其他结构体变量

对成员结构体的属性进行赋值和获取时，可以通过 `结构体名称.成员结构体名称.成员结构体属性` 的方式

## 5  结构体做函数参数

两种传递方式：

1. 值传递
2. 地址传递

代码：

```c++
#include <iostream>
using namespace std;

//学生结构体
struct student {
	//姓名
	string name;
	//年龄
	int age;
	//分数
	int score;
};

//值传递
void printStudent(student s) {
	cout << "姓名：" << s.name << " ";
	cout << "年龄：" << s.age << " ";
	cout << "分数：" << s.score << endl;
}

void printStudent2(student *s) {
	cout << "姓名：" << s->name << " ";
	cout << "年龄：" << s->age << " ";
	cout << "分数：" << s->score << endl;
}
int main() {
	
	//结构体 - 结构体做函数的参数
	student student1;
	student1.name = "李四";
	student1.age = 18;
	student1.score = 100;
    
    printStudent(student1);//值传递
	printStudent2(&student1);//地址传递
	
	system("pause");
	return 0;
}
```

注意：

> 值传递时，结构体访问属性使用的是操作符 `.`
>
> 地址传递时，结构体变量访问属性使用的是操作符 `->`

> 值传递，形参改变，不改变主函数中的实参
>
> 地址传递，形参改变，主函数中的实参也会发生改变

## 6  const 修饰结构体变量

作用：防止误操作

代码：

```c++
#include <iostream>
using namespace std;

struct student {
	//姓名
	string name;
	//年龄
	int age;
	//分数
	int score;
};

void printStudent(const student *s) {
	//s->name = "新名词";//const限制写入操作
	cout << "姓名：" << s->name << " ";
	cout << "年龄：" << s->age << " ";
	cout << "分数：" << s->score << endl;
}
int main() {
	
	//结构体 - const修饰结构体
	student student1;
	student1.name = "李四";
	student1.age = 18;
	student1.score = 100;
	printStudent(&student1);
	
	system("pause");
	return 0;
}
```

>[!note] 注意
> - 使用 const 对传入地址传递的函数中的形参禁止写的操作，以防出错
> - 值传递的缺点是如果是多个人同时调用同一个函数，会同时创建额外的很多内存空间共函数使用
> - 地址传递有效避免上述问题，节省内存空间

## 7  结构体案例 1

题目：学校正在做毕设项目，每名老师带领 5 个学生，总共 3 名老师，需求如下：

设计学生和老师的结构体，其中老师的结构体中，有老师的姓名和一个存放 5 名学生的数组作为成员；

学生的成员有姓名、考试分数；创建数组存放 3 名老师，通过函数给每个老师及所带的学生赋值；

最终打印老师数据以及老师所带的学生的数据

代码：

```c++
#include <iostream>
using namespace std;

struct student {
	//姓名
	string name;
	//分数
	int score;
};

struct teacher {
	//老师姓名
	string name;
	//学生数组
	struct student stu[5];
};
//输入老师的信息
void cinTeacher(teacher* t, int num);

//自动赋值
void createTeacher(teacher* t, int num);

//打印老师的信息
void printTeacher(teacher *t, int length);

int main() {
	
	//结构体 - 结构体案例1 - 老师学生信息
	teacher t[3];
	//cinTeacher(t, 3);
	createTeacher(t, 3);
	printTeacher(t);
	
	system("pause");
	return 0;
}

void createTeacher(teacher* t, int num) {
	string createA = "ABCDE";
	string teacherNamePre = "teacher_";
	string studentNamePre = "student_";
	for (int i = 0; i < num; i++) {
		t[i].name = teacherNamePre + createA[i];
		for (int j = 0; j < 5; j++) {
			t[i].stu[j].name = studentNamePre + createA[i] + createA[j];
			t[i].stu[j].score = rand()%100;
		}
	}
}

void cinTeacher(teacher* t, int num) {
	for (int i = 0; i < num; i++) {
		cout << "请输入第" << i+1 << "名老师的姓名：" << endl;
		cin >> t[i].name;
		for (int j = 0; j < 5; j++) {
			cout << "请输入" << t[i].name << "老师第" << j+1 << "名学生的姓名：" << endl;
			cin >> t[i].stu[j].name;
			cout << "请输入" << t[i].stu[j].name << "同学的分数：" << endl;
			cin >> t[i].stu[j].score;
		}
	}
}

void printTeacher(teacher *t, int length) {
	for (int j = 0; j < length; j++) {
		cout << "第" << j+1 << "名老师的姓名为：" << t[j].name << endl;
		for (int i = 0; i < 5; i++) {
			cout << "学生" << i + 1 << "的姓名为：" << t[j].stu[i].name << " 他的分数为：" << t[j].stu[i].score << endl;
		}
	}
	cout << endl;
}
```

## 8  结构体案例 2

题目：设计一个英雄的结构体，包括成员姓名，年龄，性别；

创建结构体数组，数组中存放 5 名英雄

通过冒泡排序的算法，将数组中的英雄按照年龄进行升序排序，最终打印排序后的结果

五名英雄的信息如下：

```c++
	{"刘备", 23, "男"}，
    {"关羽", 22, "男"},
	{"张飞", 20, "男"},
	{"赵云", 21, "男"},
	{"貂蝉", 19, "女"}
```

代码：

```c++
#include <iostream>
using namespace std;

struct hero {
	string name;
	int age;
	string sex;
};

void bubbleSort(hero* h, int num);

int main() {

	hero heros[5] = {
		{"刘备", 23, "男"},
	{"关羽", 22, "男"},
	{"张飞", 20, "男"},
	{"赵云", 21, "男"},
	{"貂蝉", 19, "女"}
	};
	bubbleSort(heros, 5);
	for (int i = 0; i < 5; i++) {
		cout << "name：" << heros[i].name << " age：" << heros[i].age << " sex：" << heros[i].sex << endl;
	}

	system("pause");
	return 0;
}

void bubbleSort(hero* h, int num) {
	hero temp;
	for (int i = 0; i < num-1; i++) {
		for (int j = 0; j < num - i - 1; j++) {
			if (h[j].age > h[j + 1].age) {
				temp = h[j];
				h[j] = h[j + 1];
				h[j + 1] = temp;
			}
		}
	}
}
```

注意：

> 结构体变量可以直接进行整体复制，如同基础类型变量一样
>
> 比如：`struct student stu1 = stu2;`
