

## 1  C语言的输入输出方式


### 1.1  输入函数

### 1.2  文件相关的输入输出函数

#### 1.2.1  文件操作前言

两种文件类型：

+ 文本文件`.txt`：纯文本格式存储，最小维护工作，易于阅读，最小安全性，占用更大存储空间
+ 二进制文件`.bin`：容纳更多数据，不易读取，更高安全性

**文件操作：**

1. **声明文件**

   `File *fp;   `

2. **打开/创建——`fopen()`函数**

   作用：创建一个新的文件或者打开一个已有的文件

   语法：`FILE *fopen(const char *filename, const char *mode);`

   `fopen_s`

   **mode:**

   + `r`：只读，打开一个存在的文本文件，如果文件不存在，`fopen()`函数返回NULL
   + `w`：只写文件，如果文件存在，则将文件截断为0 ，从头写，如果文件不存在则创建一个新文件
   + `a`：追加写文件，如果文件不存在则创建一个新文件
   + `r+`：读写文件，先读后写，从起始位置上开始写入文件，如果文件不存在，`fopen()`函数返回NULL
   + `w+`：读写文件，先写后读，如果文件存在，则将文件截断为0 ，从头写。如果文件不存在则创建一个新文件
   + `a+`：读写文件。从头开始读，追加的模式写入。如果文件不存在则创建一个新文件
   + 二进制文件：`rb, wb, ab, rb+, wb+, ab+`

   > 注意：
   >
   > + `w`模式新建文件，只有路径正确且存在，而文件不存在，才会新建文件夹，也就是说
   >
   > 1. 路径存在，文件存在：文件截断为零，重新写入
   > 2. 路径存在，文件不存在：创建一个新文件
   > 3. 路径不存在，不会新建文件，而是返回`NULL`
   >
   > + `r+`模式，是读取文件后，从文件指针处开始写入文件
   >
   > `w`，`w+`模式，是直接将文件截断为零，重新写入文件
   >
   > `a`，`a+`模式，则只会从文件末尾开始追加，无论文件指针在什么位置
   >
   > 也就是说，如果想在文件中插入内容，只有`r+`模式能够实现，需要使用`fseek()`函数将文件指针偏移到需要插入的位置
   >
   > + `rb+`和`r+b`是等价的

3. **关闭文件**

   作用：清空缓存区数据，关闭文件，并释放该文件的所有内存

   语法：`int fclose(FILE *fp);`

   + 成功关闭文件，返回零
   + 关闭文件发生错误，返回`EOF`

4. **读取**
5. **写入**

#### 1.2.2  输入函数

##### 3.2.1 (1)`fscanf()`函数

**作用：**从文件中读取字符串，遇到第一个空格或者换行符时停止读取

**语法：**`int fscanf(FILE *fp, const char * format, 变量地址)`

> 同`scanf()`函数相比，参数中多了一个`fp`文件指针，但其余都一样

##### 3.2.2 (2)`fgets()`函数——推荐使用的输入函数

**作用：**从**`fp`指向的输入流**中读取**n-1**个字符。把读入的字符串复制到缓冲区**buff**，并在最后追加一个**`NULL`**字符来终止字符串。

**语法：**`char *fgets(char *buf, int n, FILE *fp);`

> 如果在读取最后一个字符(第n-1个字符)前，就已经遇到`\n`或者是文件末尾`EOF`，则只会返回读取到的字符，包括换行符

> 结束的三个条件：
>
> + 读取n-1个字符，返回n-1个字符和一个`NULL`字符
> + 读取到换行符`\n`，返回所有读取的字符，包括换行符
> + 读取到文章末位`EOF`，返回所有读取的字符

##### 3.2.3 (3)`fgetc()`函数

**作用：**从`fp`指向的输入文件中读取一个字符，

**语法：**`int fgetc(FILE *fp);`

+ 成功，返回读取的字符
+ 失败，返回`EOF`

##### 3.2.4 (4)`fread()`函数

**作用：**从给定流 `stream ` 读取数据到 `ptr` 所指向的数组中

**语法：**

```c++
size_t fread(void *ptr, size_t size_of_elements, size_t number_of_elements, FILE *stream);
```

+ `ptr`：指向一块大小为`size_of_elements` \* `number_of_elements`的内存空间，将要读入的数据存放在这块空间中
+ `size_of_elements`：要读取的每个元素的大小，以字节为单位
+ `number_of_elements`：元素的个数，每个元素的大小为`size_of_element`字节
+ `stream`：指向FILE对象的指针，指定了一个输入流

#### 1.2.3  输出函数

##### 3.3.1 (1)`fprintf()`函数

**作用：**把字符串写入到文件中

**语法：**`int fprintf(FILE *fp, const char * format, …)`

或者，`int fprintf(FILE *fp, string str)`

##### 3.3.2 (2)`fputs()`函数

**作用：**把字符串`s`写入到`fp`所指向的输入流中

**语法：**`int fputs(const char *s, FILE *fp);`

+ 成功，返回一个非负值
+ 失败，返回`EOF`

> 这个输入流，可以是文件流，也可以是`stdout`、`stderr`等。

##### 3.3.3 (3)`fputc()`函数

**作用：**把参数`c`写入到`fp`指向的输入流中

**语法：**`int fputc(int c, FILE *fp);`

+ 成功，返回写入字符
+ 失败，返回`EOF`

##### 3.3.4 (4)`fwrite()`函数

**作用：**将`ptr`所指向的数组中的数据写入到给定流`stream`中

**语法：**

```c++
size_t fwrite(const void *ptr, size_t size_of_elements, size_t number_of_elements, FILE *stream);
```

+ `ptr`：指向要被写入的元素数组的指针
+ `size_of_elements`：要被写入的每个元素的大小，单位为字节
+ `number_of_elements`：要被写入的元素的个数，每个元素的大小为`size_of_elements`字节
+ `stream`：指向FILE对象的指针，指定了一个输出流

## 2  二，C++的输入输出
