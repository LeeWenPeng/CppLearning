### 信号的基本概念
信号是一种**软件中断**，用于通知进程发生了某个事件。信号的发送和接收是**异步**的，即发送信号的进程不需要等待接收进程的响应，接收进程也可以在任何时间处理信号。

### 常见信号来源
1. **用户输入**：在终端中，用户可以通过输入特定的字符（如Ctrl+C）向前台进程发送信号。
2. **硬件异常**：如除以零、段错误等硬件检测到的错误会触发信号。
3. **系统状态变化**：例如进程创建或终止时可能会发送信号。
4. **手动发送**：使用`kill`命令或`kill()`函数向进程发送信号。

### 信号的主要用途

-   **通知进程事件的发生**：例如，用户按下Ctrl+C发送SIGINT信号，通知进程中断执行。
-   **执行信号处理程序**：进程可以注册自定义的信号处理函数，执行特定的代码以响应信号。

### 信号的特点

-   **简单**：信号机制的接口相对简单，易于使用。
-   **不能携带大量信息**：每个信号只能传递一个整数值，无法传递复杂的数据结构。
-   **条件触发**：信号的发送通常由特定事件触发，如硬件异常、用户输入或系统调用。
-   **高优先级**：信号的处理会中断进程的正常执行，具有较高的优先级。

### 查看信号信息

```bash
# 查看信号手册
man 7 signal

# 列出系统定义的信号
kill -l
```

+   $[0, 31]$为常规信号
+   $[34, 64]$为预定义好的实时信号

### 信号的默认动作

+   `Term`：结束进程
+   `Ign`：忽略该信号
+   `Core`：终止进程并且生成 core 文件
+   `Stop`：暂停当前进程
+   `Cont`：继续指向被暂停(stopped)的进程

### 查看系统定义的进程信号

```bash
kill -l
```

### 常用信号一览表

| 信号值 | 信号名      | 动作事件                                           | 默认动作 |
| ------ | ----------- | -------------------------------------------------- | -------- |
| 2      | ==SIGINT==  | 中断信号，如Ctrl+C。                               | Term     |
| 3      | ==SIGQUIT== | 退出信号，如Ctrl+D，Ctrl+\。                       | Core     |
| 9      | ==SIGKILL== | 强制终止进程，无法捕捉或忽略。                     | Term     |
| 11     | ==SIGSEGV== | 段错误，尝试访问无效内存地址。                     | Core     |
| 13     | ==SIGPIPE== | Broken Pipe 向一个没有读端的管道写数据，终止进程。 | Term     |
| 17     | ==SIGCHLD== | child，子进程结束时，父进程会接收到该信号。        | Ign      |
| 18     | ==SIGCONT== | continue，如果进程已经停止，则使其继续运行         | Cont     |
| 19     | ==SIGSTOP== | 停止进程的执行。该信号不能被忽略，处理和阻塞。     | Stop     |

### 信号的状态

+   产生
+   未决
+   递达

### 特殊信号

+   **`SIGKILL`和`SIGSTOP`信号不能被捕捉、阻塞或忽略，只能执行默认动作。**

## SIGCHCHLD信号

### SIGCHLD产生的三种条件

+   子进程终止时
+   子进程接收到 SIGSTOP 信号停止时
+   子进程处在停止状态，接收到 SIGCONT 唤醒时

以上三种情况，都会使子进程给父进程发送 SIGCHLD 信号，父进程默认**忽略**该信号